<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>handlebars.c: handlebars_cache.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">handlebars.c
   &#160;<span id="projectnumber">0.6.0</span>
   </div>
   <div id="projectbrief">Libraryforhandlebars</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('handlebars__cache_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">handlebars_cache.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Opcode cache.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;time.h&gt;</code><br />
<code>#include &quot;<a class="el" href="handlebars_8h_source.html">handlebars.h</a>&quot;</code><br />
</div>
<p><a href="handlebars__cache_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhandlebars__cache__stat.html">handlebars_cache_stat</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhandlebars__cache.html">handlebars_cache</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">In-memory opcode cache.  <a href="structhandlebars__cache.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af9dcbe408baf4ee7e7ae4bf3a3b70137"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="handlebars__cache_8h.html#af9dcbe408baf4ee7e7ae4bf3a3b70137">handlebars_cache_ctor</a>&#160;&#160;&#160;<a class="el" href="handlebars__cache__simple_8c.html#a5ff9b1f69d33a933f4f2aa058b07fb45">handlebars_cache_simple_ctor</a></td></tr>
<tr class="memdesc:af9dcbe408baf4ee7e7ae4bf3a3b70137"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new cache.  <a href="#af9dcbe408baf4ee7e7ae4bf3a3b70137">More...</a><br /></td></tr>
<tr class="separator:af9dcbe408baf4ee7e7ae4bf3a3b70137"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9abda8af467c7f1a786d2d90390229d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="handlebars__cache_8h.html#af9abda8af467c7f1a786d2d90390229d">handlebars_cache_find</a>(cache,  key)&#160;&#160;&#160;(cache-&gt;find(cache, key))</td></tr>
<tr class="memdesc:af9abda8af467c7f1a786d2d90390229d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lookup a program from the cache.  <a href="#af9abda8af467c7f1a786d2d90390229d">More...</a><br /></td></tr>
<tr class="separator:af9abda8af467c7f1a786d2d90390229d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e86c430739724105a2668d4ac061116"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="handlebars__cache_8h.html#a8e86c430739724105a2668d4ac061116">handlebars_cache_add</a>(cache,  key,  module)&#160;&#160;&#160;(cache-&gt;add(cache, key, module))</td></tr>
<tr class="memdesc:a8e86c430739724105a2668d4ac061116"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a program to the cache. Adding the same key twice is an error.  <a href="#a8e86c430739724105a2668d4ac061116">More...</a><br /></td></tr>
<tr class="separator:a8e86c430739724105a2668d4ac061116"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bc2442e236c53235b9b303077e364eb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="handlebars__cache_8h.html#a7bc2442e236c53235b9b303077e364eb">handlebars_cache_gc</a>(cache)&#160;&#160;&#160;(cache-&gt;gc(cache))</td></tr>
<tr class="memdesc:a7bc2442e236c53235b9b303077e364eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Garbage collect the cache.  <a href="#a7bc2442e236c53235b9b303077e364eb">More...</a><br /></td></tr>
<tr class="separator:a7bc2442e236c53235b9b303077e364eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c04f2dfbacecc5f1fe7bc0d017eb37d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="handlebars__cache_8h.html#a6c04f2dfbacecc5f1fe7bc0d017eb37d">handlebars_cache_reset</a>(cache)&#160;&#160;&#160;(cache-&gt;reset(cache))</td></tr>
<tr class="memdesc:a6c04f2dfbacecc5f1fe7bc0d017eb37d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the cache.  <a href="#a6c04f2dfbacecc5f1fe7bc0d017eb37d">More...</a><br /></td></tr>
<tr class="separator:a6c04f2dfbacecc5f1fe7bc0d017eb37d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2c5ae5a2239cb3f40a987c7adf6fe66"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="handlebars__cache_8h.html#ab2c5ae5a2239cb3f40a987c7adf6fe66">handlebars_cache_stat</a>(cache)&#160;&#160;&#160;(cache-&gt;stat(cache))</td></tr>
<tr class="memdesc:ab2c5ae5a2239cb3f40a987c7adf6fe66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch cache statistics.  <a href="#ab2c5ae5a2239cb3f40a987c7adf6fe66">More...</a><br /></td></tr>
<tr class="separator:ab2c5ae5a2239cb3f40a987c7adf6fe66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a4d3b2779e999bcf547653ae61c2323"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="handlebars__cache_8h.html#a1a4d3b2779e999bcf547653ae61c2323">handlebars_cache_dtor</a>(cache)&#160;&#160;&#160;<a class="el" href="handlebars__memory_8h.html#aeb07c4a0272c512f8a8d694e5b8b97ef">handlebars_talloc_free</a>(cache)</td></tr>
<tr class="memdesc:a1a4d3b2779e999bcf547653ae61c2323"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destruct a cache.  <a href="#a1a4d3b2779e999bcf547653ae61c2323">More...</a><br /></td></tr>
<tr class="separator:a1a4d3b2779e999bcf547653ae61c2323"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a6cc1306deeb031c201079d27e725fe26"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="handlebars__cache_8h.html#a6cc1306deeb031c201079d27e725fe26">handlebars_cache_add_func</a>) (struct <a class="el" href="structhandlebars__cache.html">handlebars_cache</a> *cache, struct <a class="el" href="structhandlebars__string.html">handlebars_string</a> *tmpl, struct <a class="el" href="structhandlebars__module.html">handlebars_module</a> *module)</td></tr>
<tr class="separator:a6cc1306deeb031c201079d27e725fe26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c74bd45bd92a28c5fb399c17feb4169"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structhandlebars__module.html">handlebars_module</a> *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="handlebars__cache_8h.html#a2c74bd45bd92a28c5fb399c17feb4169">handlebars_cache_find_func</a>) (struct <a class="el" href="structhandlebars__cache.html">handlebars_cache</a> *cache, struct <a class="el" href="structhandlebars__string.html">handlebars_string</a> *tmpl)</td></tr>
<tr class="separator:a2c74bd45bd92a28c5fb399c17feb4169"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a760c595336f538b8ea53403b2aba0611"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="handlebars__cache_8h.html#a760c595336f538b8ea53403b2aba0611">handlebars_cache_gc_func</a>) (struct <a class="el" href="structhandlebars__cache.html">handlebars_cache</a> *cache)</td></tr>
<tr class="separator:a760c595336f538b8ea53403b2aba0611"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adae8bcf1a56edf7ff66523a180adc3b1"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="handlebars__cache_8h.html#adae8bcf1a56edf7ff66523a180adc3b1">handlebars_cache_release_func</a>) (struct <a class="el" href="structhandlebars__cache.html">handlebars_cache</a> *cache, struct <a class="el" href="structhandlebars__string.html">handlebars_string</a> *tmpl, struct <a class="el" href="structhandlebars__module.html">handlebars_module</a> *module)</td></tr>
<tr class="separator:adae8bcf1a56edf7ff66523a180adc3b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cc06e0fb0e5b0e8824abb9c3c9b8cfd"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structhandlebars__cache__stat.html">handlebars_cache_stat</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="handlebars__cache_8h.html#a7cc06e0fb0e5b0e8824abb9c3c9b8cfd">handlebars_cache_stat_func</a>) (struct <a class="el" href="structhandlebars__cache.html">handlebars_cache</a> *cache)</td></tr>
<tr class="separator:a7cc06e0fb0e5b0e8824abb9c3c9b8cfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e9c36b2d18ddef6501d684a737c8bf9"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="handlebars__cache_8h.html#a5e9c36b2d18ddef6501d684a737c8bf9">handlebars_cache_reset_func</a>) (struct <a class="el" href="structhandlebars__cache.html">handlebars_cache</a> *cache)</td></tr>
<tr class="separator:a5e9c36b2d18ddef6501d684a737c8bf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a32914ecea83b0fa66d9c8387cc5cb333"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structhandlebars__cache.html">handlebars_cache</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="handlebars__cache_8h.html#a32914ecea83b0fa66d9c8387cc5cb333">handlebars_cache_simple_ctor</a> (struct <a class="el" href="structhandlebars__context.html">handlebars_context</a> *context) <a class="el" href="handlebars_8h.html#a044aeca53744a6823458f17a21309173">HBS_ATTR_NONNULL_ALL</a> <a class="el" href="handlebars__vm_8h.html#a959aae9282d7a2e7ca4486bcf0398c28">HBS_ATTR_RETURNS_NONNULL</a></td></tr>
<tr class="memdesc:a32914ecea83b0fa66d9c8387cc5cb333"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new simple cache.  <a href="#a32914ecea83b0fa66d9c8387cc5cb333">More...</a><br /></td></tr>
<tr class="separator:a32914ecea83b0fa66d9c8387cc5cb333"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc525d2d82aa842553b245c9ecf99a7c"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structhandlebars__cache.html">handlebars_cache</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="handlebars__cache_8h.html#adc525d2d82aa842553b245c9ecf99a7c">handlebars_cache_lmdb_ctor</a> (struct <a class="el" href="structhandlebars__context.html">handlebars_context</a> *context, const char *path) <a class="el" href="handlebars_8h.html#a044aeca53744a6823458f17a21309173">HBS_ATTR_NONNULL_ALL</a> <a class="el" href="handlebars__vm_8h.html#a959aae9282d7a2e7ca4486bcf0398c28">HBS_ATTR_RETURNS_NONNULL</a></td></tr>
<tr class="memdesc:adc525d2d82aa842553b245c9ecf99a7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new LMDB cache. The file specified by path does not have to exist, but must be writeable.  <a href="#adc525d2d82aa842553b245c9ecf99a7c">More...</a><br /></td></tr>
<tr class="separator:adc525d2d82aa842553b245c9ecf99a7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac5f3c1263bcdf07f85f422b13c297c1"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structhandlebars__cache.html">handlebars_cache</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="handlebars__cache_8h.html#aac5f3c1263bcdf07f85f422b13c297c1">handlebars_cache_mmap_ctor</a> (struct <a class="el" href="structhandlebars__context.html">handlebars_context</a> *context, size_t size, size_t entries) <a class="el" href="handlebars_8h.html#a044aeca53744a6823458f17a21309173">HBS_ATTR_NONNULL_ALL</a> <a class="el" href="handlebars__vm_8h.html#a959aae9282d7a2e7ca4486bcf0398c28">HBS_ATTR_RETURNS_NONNULL</a></td></tr>
<tr class="memdesc:aac5f3c1263bcdf07f85f422b13c297c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new mmap cache.  <a href="#aac5f3c1263bcdf07f85f422b13c297c1">More...</a><br /></td></tr>
<tr class="separator:aac5f3c1263bcdf07f85f422b13c297c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Opcode cache. </p>
<p>Copyright (C) 2016 John Boehr</p>
<p>This file is part of <a class="el" href="handlebars_8c.html">handlebars.c</a>.</p>
<p><a class="el" href="handlebars_8c.html">handlebars.c</a> is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation, either version 2.1 of the License, or (at your option) any later version.</p>
<p><a class="el" href="handlebars_8c.html">handlebars.c</a> is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.</p>
<p>You should have received a copy of the GNU Lesser General Public License along with <a class="el" href="handlebars_8c.html">handlebars.c</a>. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>. </p>

<p>Definition in file <a class="el" href="handlebars__cache_8h_source.html">handlebars_cache.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a8e86c430739724105a2668d4ac061116"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define handlebars_cache_add</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cache, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">key, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">module&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(cache-&gt;add(cache, key, module))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a program to the cache. Adding the same key twice is an error. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cache</td><td>The cache </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>The cache key. Can be a filename, actual template, or arbitrary string </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">program</td><td>The program </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The cache entry </dd></dl>

<p>Definition at line <a class="el" href="handlebars__cache_8h_source.html#l00198">198</a> of file <a class="el" href="handlebars__cache_8h_source.html">handlebars_cache.h</a>.</p>

</div>
</div>
<a class="anchor" id="af9dcbe408baf4ee7e7ae4bf3a3b70137"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define handlebars_cache_ctor&#160;&#160;&#160;<a class="el" href="handlebars__cache__simple_8c.html#a5ff9b1f69d33a933f4f2aa058b07fb45">handlebars_cache_simple_ctor</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a new cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>The handlebars context </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The cache </dd></dl>

<p>Definition at line <a class="el" href="handlebars__cache_8h_source.html#l00181">181</a> of file <a class="el" href="handlebars__cache_8h_source.html">handlebars_cache.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1a4d3b2779e999bcf547653ae61c2323"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define handlebars_cache_dtor</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cache</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="handlebars__memory_8h.html#aeb07c4a0272c512f8a8d694e5b8b97ef">handlebars_talloc_free</a>(cache)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destruct a cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cache</td><td>The cache </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="handlebars__cache_8h_source.html#l00226">226</a> of file <a class="el" href="handlebars__cache_8h_source.html">handlebars_cache.h</a>.</p>

</div>
</div>
<a class="anchor" id="af9abda8af467c7f1a786d2d90390229d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define handlebars_cache_find</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cache, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">key&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(cache-&gt;find(cache, key))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lookup a program from the cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cache</td><td>The cache </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>The cache key, Can be a filename, actual template, or arbitrary string </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The cache entry, or NULL </dd></dl>

<p>Definition at line <a class="el" href="handlebars__cache_8h_source.html#l00189">189</a> of file <a class="el" href="handlebars__cache_8h_source.html">handlebars_cache.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7bc2442e236c53235b9b303077e364eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define handlebars_cache_gc</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cache</td><td>)</td>
          <td>&#160;&#160;&#160;(cache-&gt;gc(cache))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Garbage collect the cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cache</td><td>The cache </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of entries removed </dd></dl>

<p>Definition at line <a class="el" href="handlebars__cache_8h_source.html#l00205">205</a> of file <a class="el" href="handlebars__cache_8h_source.html">handlebars_cache.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6c04f2dfbacecc5f1fe7bc0d017eb37d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define handlebars_cache_reset</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cache</td><td>)</td>
          <td>&#160;&#160;&#160;(cache-&gt;reset(cache))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset the cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cache</td><td>The cache </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="handlebars__cache_8h_source.html#l00212">212</a> of file <a class="el" href="handlebars__cache_8h_source.html">handlebars_cache.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab2c5ae5a2239cb3f40a987c7adf6fe66"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="structhandlebars__cache__stat.html">handlebars_cache_stat</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cache</td><td>)</td>
          <td>&#160;&#160;&#160;(cache-&gt;stat(cache))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetch cache statistics. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cache</td><td>The cache </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The cache statistics </dd></dl>

<p>Definition at line <a class="el" href="handlebars__cache_8h_source.html#l00219">219</a> of file <a class="el" href="handlebars__cache_8h_source.html">handlebars_cache.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a6cc1306deeb031c201079d27e725fe26"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* handlebars_cache_add_func) (struct <a class="el" href="structhandlebars__cache.html">handlebars_cache</a> *cache, struct <a class="el" href="structhandlebars__string.html">handlebars_string</a> *tmpl, struct <a class="el" href="structhandlebars__module.html">handlebars_module</a> *module)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="handlebars__cache_8h_source.html#l00041">41</a> of file <a class="el" href="handlebars__cache_8h_source.html">handlebars_cache.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2c74bd45bd92a28c5fb399c17feb4169"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structhandlebars__module.html">handlebars_module</a>*(* handlebars_cache_find_func) (struct <a class="el" href="structhandlebars__cache.html">handlebars_cache</a> *cache, struct <a class="el" href="structhandlebars__string.html">handlebars_string</a> *tmpl)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="handlebars__cache_8h_source.html#l00047">47</a> of file <a class="el" href="handlebars__cache_8h_source.html">handlebars_cache.h</a>.</p>

</div>
</div>
<a class="anchor" id="a760c595336f538b8ea53403b2aba0611"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* handlebars_cache_gc_func) (struct <a class="el" href="structhandlebars__cache.html">handlebars_cache</a> *cache)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="handlebars__cache_8h_source.html#l00052">52</a> of file <a class="el" href="handlebars__cache_8h_source.html">handlebars_cache.h</a>.</p>

</div>
</div>
<a class="anchor" id="adae8bcf1a56edf7ff66523a180adc3b1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* handlebars_cache_release_func) (struct <a class="el" href="structhandlebars__cache.html">handlebars_cache</a> *cache, struct <a class="el" href="structhandlebars__string.html">handlebars_string</a> *tmpl, struct <a class="el" href="structhandlebars__module.html">handlebars_module</a> *module)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="handlebars__cache_8h_source.html#l00056">56</a> of file <a class="el" href="handlebars__cache_8h_source.html">handlebars_cache.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5e9c36b2d18ddef6501d684a737c8bf9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* handlebars_cache_reset_func) (struct <a class="el" href="structhandlebars__cache.html">handlebars_cache</a> *cache)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="handlebars__cache_8h_source.html#l00066">66</a> of file <a class="el" href="handlebars__cache_8h_source.html">handlebars_cache.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7cc06e0fb0e5b0e8824abb9c3c9b8cfd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structhandlebars__cache__stat.html">handlebars_cache_stat</a>(* handlebars_cache_stat_func) (struct <a class="el" href="structhandlebars__cache.html">handlebars_cache</a> *cache)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="handlebars__cache_8h_source.html#l00062">62</a> of file <a class="el" href="handlebars__cache_8h_source.html">handlebars_cache.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="adc525d2d82aa842553b245c9ecf99a7c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structhandlebars__cache.html">handlebars_cache</a>* handlebars_cache_lmdb_ctor </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structhandlebars__context.html">handlebars_context</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a new LMDB cache. The file specified by path does not have to exist, but must be writeable. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>The handlebars context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>The database file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The cache</dd></dl>
<p>Copyright (C) 2016 John Boehr</p>
<p>This file is part of <a class="el" href="handlebars_8c.html">handlebars.c</a>.</p>
<p><a class="el" href="handlebars_8c.html">handlebars.c</a> is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation, either version 2.1 of the License, or (at your option) any later version.</p>
<p><a class="el" href="handlebars_8c.html">handlebars.c</a> is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.</p>
<p>You should have received a copy of the GNU Lesser General Public License along with <a class="el" href="handlebars_8c.html">handlebars.c</a>. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>. </p>

<p>Definition at line <a class="el" href="handlebars__cache__lmdb_8c_source.html#l00307">307</a> of file <a class="el" href="handlebars__cache__lmdb_8c_source.html">handlebars_cache_lmdb.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="handlebars_8c.html#ae53cf83b47627706cdc4143e5c6a4afe">handlebars_throw</a>(context, <a class="code" href="handlebars_8h.html#a0d850aff222bf50c105a0fb2207c80eea85e9b3c086d96c8eff9e51e387bbdf67">HANDLEBARS_ERROR</a>, <span class="stringliteral">&quot;lmdb not available&quot;</span>);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;}</div><div class="ttc" id="handlebars_8c_html_ae53cf83b47627706cdc4143e5c6a4afe"><div class="ttname"><a href="handlebars_8c.html#ae53cf83b47627706cdc4143e5c6a4afe">handlebars_throw</a></div><div class="ttdeci">void handlebars_throw(struct handlebars_context *context, enum handlebars_error_type num, const char *msg,...)</div><div class="ttdef"><b>Definition:</b> <a href="handlebars_8c_source.html#l00299">handlebars.c:299</a></div></div>
<div class="ttc" id="handlebars_8h_html_a0d850aff222bf50c105a0fb2207c80eea85e9b3c086d96c8eff9e51e387bbdf67"><div class="ttname"><a href="handlebars_8h.html#a0d850aff222bf50c105a0fb2207c80eea85e9b3c086d96c8eff9e51e387bbdf67">HANDLEBARS_ERROR</a></div><div class="ttdoc">Indicates that a generic error has occurred. </div><div class="ttdef"><b>Definition:</b> <a href="handlebars_8h_source.html#l00119">handlebars.h:119</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aac5f3c1263bcdf07f85f422b13c297c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structhandlebars__cache.html">handlebars_cache</a>* handlebars_cache_mmap_ctor </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structhandlebars__context.html">handlebars_context</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>entries</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a new mmap cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>The handlebars context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>The size of the mmap block, in bytes </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">entries</td><td>The fixed number of entries in the hash table </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The cache </dd></dl>

<p>Definition at line <a class="el" href="handlebars__cache__mmap_8c_source.html#l00413">413</a> of file <a class="el" href="handlebars__cache__mmap_8c_source.html">handlebars_cache_mmap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keyword">struct </span><a class="code" href="structhandlebars__cache.html">handlebars_cache</a> * cache = <a class="code" href="handlebars__private_8h.html#a82f25723efb47b667ac4b68d8c8bfba9">MC</a>(<a class="code" href="handlebars__memory_8h.html#a4a17829b92cce6ae02bc3174fd6c0e30">handlebars_talloc_zero</a>(context, <span class="keyword">struct</span> <a class="code" href="structhandlebars__cache.html">handlebars_cache</a>));</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <a class="code" href="handlebars_8c.html#a1f4fa306534133f7349a77eeee628c42">handlebars_context_bind</a>(context, <a class="code" href="handlebars_8h.html#aeaa554d04fd9ac8b882e4fdf0dc44264">HBSCTX</a>(cache));</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    cache-&gt;<a class="code" href="structhandlebars__cache.html#a5e03e6bcdb242893423b04205d430121">max_age</a> = -1;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    cache-&gt;<a class="code" href="structhandlebars__cache.html#a40efcf612dfc3076f029b6be9a3e3ff5">add</a> = &amp;<a class="code" href="handlebars__cache__mmap_8c.html#ac55c4b65fbb66d868640c5892cf8b181">cache_add</a>;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    cache-&gt;<a class="code" href="structhandlebars__cache.html#aaec95f3accb1044fff9ab768995c5df4">find</a> = &amp;<a class="code" href="handlebars__cache__mmap_8c.html#ab97827ab3064e100bab8d45a88320bb9">cache_find</a>;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    cache-&gt;<a class="code" href="structhandlebars__cache.html#a705c63123f96ca05b90f296ce8631569">gc</a> = &amp;<a class="code" href="handlebars__cache__mmap_8c.html#adb3159a37e6e5e2b339e2bd4159f51dc">cache_gc</a>;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    cache-&gt;<a class="code" href="structhandlebars__cache.html#af21639fb5e6beb8bb6223e1fc5bfd2d8">release</a> = &amp;<a class="code" href="handlebars__cache__mmap_8c.html#a62b4d5cb0eae7108d0df7f1af2395f65">cache_release</a>;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    cache-&gt;<a class="code" href="structhandlebars__cache.html#ad7050f50c3b7e3d93bcc35544a287c6c">stat</a> = &amp;<a class="code" href="handlebars__cache__mmap_8c.html#af79331ff1183a715cb149247f955d0a7">cache_stat</a>;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    cache-&gt;<a class="code" href="structhandlebars__cache.html#a7bc84fe7c357a726073a3942e46d8d1f">reset</a> = &amp;<a class="code" href="handlebars__cache__mmap_8c.html#aac5cf4d9696fde58dbde385f86b9efc8">cache_reset</a>;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    talloc_set_destructor(cache, <a class="code" href="handlebars__cache__mmap_8c.html#a64d298d4e018b19fed9ed107eb040c3c">cache_dtor</a>);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="comment">// Get page size</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="preprocessor">#if defined(_SC_PAGESIZE) &amp;&amp; _SC_PAGESIZE != -1</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <a class="code" href="handlebars__cache__mmap_8c.html#af91f634fbc8d26e705035b0613f7d077">page_size</a> = (size_t) sysconf(_SC_PAGESIZE);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="preprocessor">#elif defined(PAGE_SIZE)</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <a class="code" href="handlebars__cache__mmap_8c.html#af91f634fbc8d26e705035b0613f7d077">page_size</a> = PAGE_SIZE;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="preprocessor">#error &quot;Unable to query page size&quot;</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="comment">// Calculate sizes</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordtype">size_t</span> intern_size = <a class="code" href="handlebars__cache__mmap_8c.html#a74942634f14b677d6420778c681e5eee">align_size</a>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structhandlebars__cache__mmap.html">handlebars_cache_mmap</a>));</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordtype">size_t</span> shm_size = <a class="code" href="handlebars__cache__mmap_8c.html#a74942634f14b677d6420778c681e5eee">align_size</a>(size);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keywordtype">size_t</span> table_size = <a class="code" href="handlebars__cache__mmap_8c.html#a74942634f14b677d6420778c681e5eee">align_size</a>(entries * <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structtable__entry.html">table_entry</a> *));</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordtype">size_t</span> data_size = shm_size - table_size - intern_size;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordflow">if</span>( table_size &gt;= shm_size ) {</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <a class="code" href="handlebars_8c.html#ae53cf83b47627706cdc4143e5c6a4afe">handlebars_throw</a>(<a class="code" href="handlebars__cache__mmap_8c.html#af195e2296079bbf21ae1c19823f0f036">CONTEXT</a>, <a class="code" href="handlebars_8h.html#a0d850aff222bf50c105a0fb2207c80eea85e9b3c086d96c8eff9e51e387bbdf67">HANDLEBARS_ERROR</a>, <span class="stringliteral">&quot;Table size must not be greater than segment size&quot;</span>);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    }</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keyword">struct </span><a class="code" href="structhandlebars__cache__mmap.html">handlebars_cache_mmap</a> * intern = mmap(NULL, shm_size, PROT_READ | PROT_WRITE, MAP_SHARED | MAP_ANONYMOUS, -1, 0);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">if</span>( intern == MAP_FAILED ) {</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <a class="code" href="handlebars_8c.html#ae53cf83b47627706cdc4143e5c6a4afe">handlebars_throw</a>(<a class="code" href="handlebars__cache__mmap_8c.html#af195e2296079bbf21ae1c19823f0f036">CONTEXT</a>, <a class="code" href="handlebars_8h.html#a0d850aff222bf50c105a0fb2207c80eea85e9b3c086d96c8eff9e51e387bbdf67">HANDLEBARS_ERROR</a>, <span class="stringliteral">&quot;Failed to mmap: %s&quot;</span>, strerror(errno));</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    }</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    cache-&gt;<a class="code" href="structhandlebars__cache.html#ae62d0123ba88d34c14e6aa31cff58a6b">internal</a> = intern;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    memset(intern, 0, intern_size);</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <a class="code" href="handlebars__string_8h.html#a63c99b5ce4c89deb54bb53514278027a">memcpy</a>(intern, <a class="code" href="handlebars__cache__mmap_8c.html#ac681967740693099a0ea2318b241af65">head</a>, <span class="keyword">sizeof</span>(<a class="code" href="handlebars__cache__mmap_8c.html#ac681967740693099a0ea2318b241af65">head</a>));</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    intern-&gt;<a class="code" href="structhandlebars__cache__mmap.html#a127651b8f7a6422e52a940b03e327869">version</a> = <a class="code" href="handlebars_8c.html#ab47ffc947fd2d7d4488f85a269e289af">handlebars_version</a>();</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    intern-&gt;<a class="code" href="structhandlebars__cache__mmap.html#a4016bb37756b65c2bc2e3620fe0da001">size</a> = shm_size;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    intern-&gt;<a class="code" href="structhandlebars__cache__mmap.html#a30c0a33691326c7f3877e3d98ed6896c">intern_size</a> = <a class="code" href="structhandlebars__cache__mmap.html#a30c0a33691326c7f3877e3d98ed6896c">intern_size</a>;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    intern-&gt;<a class="code" href="structhandlebars__cache__mmap.html#a97204788ab4999d7fa6db5c8add14ed5">table_size</a> = <a class="code" href="structhandlebars__cache__mmap.html#a97204788ab4999d7fa6db5c8add14ed5">table_size</a>;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    intern-&gt;<a class="code" href="structhandlebars__cache__mmap.html#a8450774fdeadcddcb022b007eb315ba4">data_size</a> = <a class="code" href="structhandlebars__cache__mmap.html#a8450774fdeadcddcb022b007eb315ba4">data_size</a>;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    intern-&gt;<a class="code" href="structhandlebars__cache__mmap.html#aea5569d60298a88a1012523db0e91c40">table_count</a> = entries; <span class="comment">//table_size / sizeof(struct table_entry *);</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    intern-&gt;<a class="code" href="structhandlebars__cache__mmap.html#ad0a5032df05a781d5741e59353720971">table</a> = ((<span class="keywordtype">void</span> *) intern) + <a class="code" href="structhandlebars__cache__mmap.html#a30c0a33691326c7f3877e3d98ed6896c">intern_size</a>;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    intern-&gt;<a class="code" href="structhandlebars__cache__mmap.html#a7e07fa52d80d3bfe23ef2f191334c178">data</a> = ((<span class="keywordtype">void</span> *) intern) + intern_size + <a class="code" href="structhandlebars__cache__mmap.html#a97204788ab4999d7fa6db5c8add14ed5">table_size</a>;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="preprocessor">#if USE_SPINLOCK</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordtype">int</span> rc = pthread_spin_init(&amp;intern-&gt;<a class="code" href="structhandlebars__cache__mmap.html#a9a06d1bee217ccc81929c6d194425142">write_lock</a>, PTHREAD_PROCESS_SHARED);</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    pthread_mutexattr_t mattr;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    pthread_mutexattr_init(&amp;mattr);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    pthread_mutexattr_setpshared(&amp;mattr, PTHREAD_PROCESS_SHARED);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordtype">int</span> rc = pthread_mutex_init(&amp;intern-&gt;<a class="code" href="structhandlebars__cache__mmap.html#a9a06d1bee217ccc81929c6d194425142">write_lock</a>, &amp;mattr);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordflow">if</span>( rc != 0 ) {</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <a class="code" href="handlebars_8c.html#ae53cf83b47627706cdc4143e5c6a4afe">handlebars_throw</a>(<a class="code" href="handlebars__cache__mmap_8c.html#af195e2296079bbf21ae1c19823f0f036">CONTEXT</a>, <a class="code" href="handlebars_8h.html#a0d850aff222bf50c105a0fb2207c80eea85e9b3c086d96c8eff9e51e387bbdf67">HANDLEBARS_ERROR</a>, <span class="stringliteral">&quot;Failed to init lock: %s (%d)&quot;</span>, strerror(rc), rc);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    }</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <a class="code" href="handlebars__cache__mmap_8c.html#aac5cf4d9696fde58dbde385f86b9efc8">cache_reset</a>(cache);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordflow">return</span> cache;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;}</div><div class="ttc" id="handlebars__cache__mmap_8c_html_af79331ff1183a715cb149247f955d0a7"><div class="ttname"><a href="handlebars__cache__mmap_8c.html#af79331ff1183a715cb149247f955d0a7">cache_stat</a></div><div class="ttdeci">static struct handlebars_cache_stat cache_stat(struct handlebars_cache *cache)</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__mmap_8c_source.html#l00390">handlebars_cache_mmap.c:390</a></div></div>
<div class="ttc" id="handlebars__private_8h_html_a82f25723efb47b667ac4b68d8c8bfba9"><div class="ttname"><a href="handlebars__private_8h.html#a82f25723efb47b667ac4b68d8c8bfba9">MC</a></div><div class="ttdeci">#define MC(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__private_8h_source.html#l00039">handlebars_private.h:39</a></div></div>
<div class="ttc" id="structhandlebars__cache__mmap_html_a127651b8f7a6422e52a940b03e327869"><div class="ttname"><a href="structhandlebars__cache__mmap.html#a127651b8f7a6422e52a940b03e327869">handlebars_cache_mmap::version</a></div><div class="ttdeci">int version</div><div class="ttdoc">The version of handlebars this block was initialized with. </div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__mmap_8c_source.html#l00074">handlebars_cache_mmap.c:74</a></div></div>
<div class="ttc" id="structhandlebars__cache__mmap_html_aea5569d60298a88a1012523db0e91c40"><div class="ttname"><a href="structhandlebars__cache__mmap.html#aea5569d60298a88a1012523db0e91c40">handlebars_cache_mmap::table_count</a></div><div class="ttdeci">size_t table_count</div><div class="ttdoc">The number of slots in the hash table. </div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__mmap_8c_source.html#l00083">handlebars_cache_mmap.c:83</a></div></div>
<div class="ttc" id="handlebars__cache__mmap_8c_html_aac5cf4d9696fde58dbde385f86b9efc8"><div class="ttname"><a href="handlebars__cache__mmap_8c.html#aac5cf4d9696fde58dbde385f86b9efc8">cache_reset</a></div><div class="ttdeci">static void cache_reset(struct handlebars_cache *cache)</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__mmap_8c_source.html#l00231">handlebars_cache_mmap.c:231</a></div></div>
<div class="ttc" id="structhandlebars__cache_html_ae62d0123ba88d34c14e6aa31cff58a6b"><div class="ttname"><a href="structhandlebars__cache.html#ae62d0123ba88d34c14e6aa31cff58a6b">handlebars_cache::internal</a></div><div class="ttdeci">void * internal</div><div class="ttdoc">Opaque pointer for implementation use. </div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache_8h_source.html#l00118">handlebars_cache.h:118</a></div></div>
<div class="ttc" id="handlebars_8c_html_ae53cf83b47627706cdc4143e5c6a4afe"><div class="ttname"><a href="handlebars_8c.html#ae53cf83b47627706cdc4143e5c6a4afe">handlebars_throw</a></div><div class="ttdeci">void handlebars_throw(struct handlebars_context *context, enum handlebars_error_type num, const char *msg,...)</div><div class="ttdef"><b>Definition:</b> <a href="handlebars_8c_source.html#l00299">handlebars.c:299</a></div></div>
<div class="ttc" id="structhandlebars__cache__mmap_html"><div class="ttname"><a href="structhandlebars__cache__mmap.html">handlebars_cache_mmap</a></div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__mmap_8c_source.html#l00063">handlebars_cache_mmap.c:63</a></div></div>
<div class="ttc" id="handlebars_8c_html_a1f4fa306534133f7349a77eeee628c42"><div class="ttname"><a href="handlebars_8c.html#a1f4fa306534133f7349a77eeee628c42">handlebars_context_bind</a></div><div class="ttdeci">void handlebars_context_bind(struct handlebars_context *parent, struct handlebars_context *child)</div><div class="ttdef"><b>Definition:</b> <a href="handlebars_8c_source.html#l00086">handlebars.c:86</a></div></div>
<div class="ttc" id="structhandlebars__cache__mmap_html_a9a06d1bee217ccc81929c6d194425142"><div class="ttname"><a href="structhandlebars__cache__mmap.html#a9a06d1bee217ccc81929c6d194425142">handlebars_cache_mmap::write_lock</a></div><div class="ttdeci">pthread_spinlock_t write_lock</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__mmap_8c_source.html#l00106">handlebars_cache_mmap.c:106</a></div></div>
<div class="ttc" id="handlebars__cache__mmap_8c_html_adb3159a37e6e5e2b339e2bd4159f51dc"><div class="ttname"><a href="handlebars__cache__mmap_8c.html#adb3159a37e6e5e2b339e2bd4159f51dc">cache_gc</a></div><div class="ttdeci">static int cache_gc(struct handlebars_cache *cache)</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__mmap_8c_source.html#l00267">handlebars_cache_mmap.c:267</a></div></div>
<div class="ttc" id="handlebars__cache__mmap_8c_html_ac681967740693099a0ea2318b241af65"><div class="ttname"><a href="handlebars__cache__mmap_8c.html#ac681967740693099a0ea2318b241af65">head</a></div><div class="ttdeci">static const char head[]</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__mmap_8c_source.html#l00059">handlebars_cache_mmap.c:59</a></div></div>
<div class="ttc" id="structhandlebars__cache_html_af21639fb5e6beb8bb6223e1fc5bfd2d8"><div class="ttname"><a href="structhandlebars__cache.html#af21639fb5e6beb8bb6223e1fc5bfd2d8">handlebars_cache::release</a></div><div class="ttdeci">handlebars_cache_release_func release</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache_8h_source.html#l00126">handlebars_cache.h:126</a></div></div>
<div class="ttc" id="handlebars__cache__mmap_8c_html_a64d298d4e018b19fed9ed107eb040c3c"><div class="ttname"><a href="handlebars__cache__mmap_8c.html#a64d298d4e018b19fed9ed107eb040c3c">cache_dtor</a></div><div class="ttdeci">static void cache_dtor(struct handlebars_cache *cache)</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__mmap_8c_source.html#l00221">handlebars_cache_mmap.c:221</a></div></div>
<div class="ttc" id="structhandlebars__cache__mmap_html_ad0a5032df05a781d5741e59353720971"><div class="ttname"><a href="structhandlebars__cache__mmap.html#ad0a5032df05a781d5741e59353720971">handlebars_cache_mmap::table</a></div><div class="ttdeci">struct table_entry ** table</div><div class="ttdoc">The pointer to the table segment. </div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__mmap_8c_source.html#l00077">handlebars_cache_mmap.c:77</a></div></div>
<div class="ttc" id="handlebars__cache__mmap_8c_html_ac55c4b65fbb66d868640c5892cf8b181"><div class="ttname"><a href="handlebars__cache__mmap_8c.html#ac55c4b65fbb66d868640c5892cf8b181">cache_add</a></div><div class="ttdeci">static void cache_add(struct handlebars_cache *cache, struct handlebars_string *key, struct handlebars_module *module)</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__mmap_8c_source.html#l00329">handlebars_cache_mmap.c:329</a></div></div>
<div class="ttc" id="handlebars__cache__mmap_8c_html_a62b4d5cb0eae7108d0df7f1af2395f65"><div class="ttname"><a href="handlebars__cache__mmap_8c.html#a62b4d5cb0eae7108d0df7f1af2395f65">cache_release</a></div><div class="ttdeci">static void cache_release(struct handlebars_cache *cache, struct handlebars_string *tmpl, struct handlebars_module *module)</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__mmap_8c_source.html#l00384">handlebars_cache_mmap.c:384</a></div></div>
<div class="ttc" id="structhandlebars__cache_html_a7bc84fe7c357a726073a3942e46d8d1f"><div class="ttname"><a href="structhandlebars__cache.html#a7bc84fe7c357a726073a3942e46d8d1f">handlebars_cache::reset</a></div><div class="ttdeci">handlebars_cache_reset_func reset</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache_8h_source.html#l00130">handlebars_cache.h:130</a></div></div>
<div class="ttc" id="handlebars_8h_html_aeaa554d04fd9ac8b882e4fdf0dc44264"><div class="ttname"><a href="handlebars_8h.html#aeaa554d04fd9ac8b882e4fdf0dc44264">HBSCTX</a></div><div class="ttdeci">#define HBSCTX(ctx)</div><div class="ttdef"><b>Definition:</b> <a href="handlebars_8h_source.html#l00377">handlebars.h:377</a></div></div>
<div class="ttc" id="handlebars__memory_8h_html_a4a17829b92cce6ae02bc3174fd6c0e30"><div class="ttname"><a href="handlebars__memory_8h.html#a4a17829b92cce6ae02bc3174fd6c0e30">handlebars_talloc_zero</a></div><div class="ttdeci">#define handlebars_talloc_zero</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__memory_8h_source.html#l00053">handlebars_memory.h:53</a></div></div>
<div class="ttc" id="structhandlebars__cache_html_aaec95f3accb1044fff9ab768995c5df4"><div class="ttname"><a href="structhandlebars__cache.html#aaec95f3accb1044fff9ab768995c5df4">handlebars_cache::find</a></div><div class="ttdeci">handlebars_cache_find_func find</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache_8h_source.html#l00122">handlebars_cache.h:122</a></div></div>
<div class="ttc" id="handlebars__cache__mmap_8c_html_af91f634fbc8d26e705035b0613f7d077"><div class="ttname"><a href="handlebars__cache__mmap_8c.html#af91f634fbc8d26e705035b0613f7d077">page_size</a></div><div class="ttdeci">static size_t page_size</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__mmap_8c_source.html#l00061">handlebars_cache_mmap.c:61</a></div></div>
<div class="ttc" id="structhandlebars__cache__mmap_html_a4016bb37756b65c2bc2e3620fe0da001"><div class="ttname"><a href="structhandlebars__cache__mmap.html#a4016bb37756b65c2bc2e3620fe0da001">handlebars_cache_mmap::size</a></div><div class="ttdeci">size_t size</div><div class="ttdoc">The size of the memory block. </div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__mmap_8c_source.html#l00068">handlebars_cache_mmap.c:68</a></div></div>
<div class="ttc" id="structhandlebars__cache__mmap_html_a30c0a33691326c7f3877e3d98ed6896c"><div class="ttname"><a href="structhandlebars__cache__mmap.html#a30c0a33691326c7f3877e3d98ed6896c">handlebars_cache_mmap::intern_size</a></div><div class="ttdeci">size_t intern_size</div><div class="ttdoc">The page-aligned size of this struct. </div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__mmap_8c_source.html#l00071">handlebars_cache_mmap.c:71</a></div></div>
<div class="ttc" id="handlebars__cache__mmap_8c_html_ab97827ab3064e100bab8d45a88320bb9"><div class="ttname"><a href="handlebars__cache__mmap_8c.html#ab97827ab3064e100bab8d45a88320bb9">cache_find</a></div><div class="ttdeci">static struct handlebars_module * cache_find(struct handlebars_cache *cache, struct handlebars_string *key)</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__mmap_8c_source.html#l00274">handlebars_cache_mmap.c:274</a></div></div>
<div class="ttc" id="handlebars__cache__mmap_8c_html_a74942634f14b677d6420778c681e5eee"><div class="ttname"><a href="handlebars__cache__mmap_8c.html#a74942634f14b677d6420778c681e5eee">align_size</a></div><div class="ttdeci">static size_t align_size(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__mmap_8c_source.html#l00122">handlebars_cache_mmap.c:122</a></div></div>
<div class="ttc" id="structhandlebars__cache__mmap_html_a8450774fdeadcddcb022b007eb315ba4"><div class="ttname"><a href="structhandlebars__cache__mmap.html#a8450774fdeadcddcb022b007eb315ba4">handlebars_cache_mmap::data_size</a></div><div class="ttdeci">size_t data_size</div><div class="ttdoc">The size in bytes of the data segment. </div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__mmap_8c_source.html#l00092">handlebars_cache_mmap.c:92</a></div></div>
<div class="ttc" id="structhandlebars__cache_html"><div class="ttname"><a href="structhandlebars__cache.html">handlebars_cache</a></div><div class="ttdoc">In-memory opcode cache. </div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache_8h_source.html#l00113">handlebars_cache.h:113</a></div></div>
<div class="ttc" id="handlebars__string_8h_html_a63c99b5ce4c89deb54bb53514278027a"><div class="ttname"><a href="handlebars__string_8h.html#a63c99b5ce4c89deb54bb53514278027a">memcpy</a></div><div class="ttdeci">memcpy(st-&gt;val, str, len)</div></div>
<div class="ttc" id="structhandlebars__cache__mmap_html_a7e07fa52d80d3bfe23ef2f191334c178"><div class="ttname"><a href="structhandlebars__cache__mmap.html#a7e07fa52d80d3bfe23ef2f191334c178">handlebars_cache_mmap::data</a></div><div class="ttdeci">void * data</div><div class="ttdoc">The pointer to the data segment. </div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__mmap_8c_source.html#l00089">handlebars_cache_mmap.c:89</a></div></div>
<div class="ttc" id="handlebars_8c_html_ab47ffc947fd2d7d4488f85a269e289af"><div class="ttname"><a href="handlebars_8c.html#ab47ffc947fd2d7d4488f85a269e289af">handlebars_version</a></div><div class="ttdeci">int handlebars_version(void)</div><div class="ttdoc">Get the library version as an integer. </div><div class="ttdef"><b>Definition:</b> <a href="handlebars_8c_source.html#l00044">handlebars.c:44</a></div></div>
<div class="ttc" id="structhandlebars__cache_html_a705c63123f96ca05b90f296ce8631569"><div class="ttname"><a href="structhandlebars__cache.html#a705c63123f96ca05b90f296ce8631569">handlebars_cache::gc</a></div><div class="ttdeci">handlebars_cache_gc_func gc</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache_8h_source.html#l00124">handlebars_cache.h:124</a></div></div>
<div class="ttc" id="structhandlebars__cache_html_a40efcf612dfc3076f029b6be9a3e3ff5"><div class="ttname"><a href="structhandlebars__cache.html#a40efcf612dfc3076f029b6be9a3e3ff5">handlebars_cache::add</a></div><div class="ttdeci">handlebars_cache_add_func add</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache_8h_source.html#l00120">handlebars_cache.h:120</a></div></div>
<div class="ttc" id="structhandlebars__cache_html_ad7050f50c3b7e3d93bcc35544a287c6c"><div class="ttname"><a href="structhandlebars__cache.html#ad7050f50c3b7e3d93bcc35544a287c6c">handlebars_cache::stat</a></div><div class="ttdeci">handlebars_cache_stat_func stat</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache_8h_source.html#l00128">handlebars_cache.h:128</a></div></div>
<div class="ttc" id="structtable__entry_html"><div class="ttname"><a href="structtable__entry.html">table_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__mmap_8c_source.html#l00114">handlebars_cache_mmap.c:114</a></div></div>
<div class="ttc" id="handlebars__cache__mmap_8c_html_af195e2296079bbf21ae1c19823f0f036"><div class="ttname"><a href="handlebars__cache__mmap_8c.html#af195e2296079bbf21ae1c19823f0f036">CONTEXT</a></div><div class="ttdeci">#define CONTEXT</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__mmap_8c_source.html#l00411">handlebars_cache_mmap.c:411</a></div></div>
<div class="ttc" id="structhandlebars__cache_html_a5e03e6bcdb242893423b04205d430121"><div class="ttname"><a href="structhandlebars__cache.html#a5e03e6bcdb242893423b04205d430121">handlebars_cache::max_age</a></div><div class="ttdeci">double max_age</div><div class="ttdoc">The max amount of time to keep an entry, in seconds, or zero to disable. </div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache_8h_source.html#l00133">handlebars_cache.h:133</a></div></div>
<div class="ttc" id="structhandlebars__cache__mmap_html_a97204788ab4999d7fa6db5c8add14ed5"><div class="ttname"><a href="structhandlebars__cache__mmap.html#a97204788ab4999d7fa6db5c8add14ed5">handlebars_cache_mmap::table_size</a></div><div class="ttdeci">size_t table_size</div><div class="ttdoc">The size in bytes of the hash table. </div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__mmap_8c_source.html#l00080">handlebars_cache_mmap.c:80</a></div></div>
<div class="ttc" id="handlebars_8h_html_a0d850aff222bf50c105a0fb2207c80eea85e9b3c086d96c8eff9e51e387bbdf67"><div class="ttname"><a href="handlebars_8h.html#a0d850aff222bf50c105a0fb2207c80eea85e9b3c086d96c8eff9e51e387bbdf67">HANDLEBARS_ERROR</a></div><div class="ttdoc">Indicates that a generic error has occurred. </div><div class="ttdef"><b>Definition:</b> <a href="handlebars_8h_source.html#l00119">handlebars.h:119</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a32914ecea83b0fa66d9c8387cc5cb333"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structhandlebars__cache.html">handlebars_cache</a>* handlebars_cache_simple_ctor </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structhandlebars__context.html">handlebars_context</a> *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a new simple cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>The handlebars context </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The cache </dd></dl>

<p>Definition at line <a class="el" href="handlebars__cache__simple_8c_source.html#l00191">191</a> of file <a class="el" href="handlebars__cache__simple_8c_source.html">handlebars_cache_simple.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  {</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keyword">struct </span><a class="code" href="structhandlebars__cache.html">handlebars_cache</a> * cache = <a class="code" href="handlebars__private_8h.html#a82f25723efb47b667ac4b68d8c8bfba9">MC</a>(<a class="code" href="handlebars__memory_8h.html#a4a17829b92cce6ae02bc3174fd6c0e30">handlebars_talloc_zero</a>(context, <span class="keyword">struct</span> <a class="code" href="structhandlebars__cache.html">handlebars_cache</a>));</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="handlebars_8c.html#a1f4fa306534133f7349a77eeee628c42">handlebars_context_bind</a>(context, <a class="code" href="handlebars_8h.html#aeaa554d04fd9ac8b882e4fdf0dc44264">HBSCTX</a>(cache));</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    cache-&gt;<a class="code" href="structhandlebars__cache.html#a5e03e6bcdb242893423b04205d430121">max_age</a> = -1;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    cache-&gt;<a class="code" href="structhandlebars__cache.html#a40efcf612dfc3076f029b6be9a3e3ff5">add</a> = &amp;<a class="code" href="handlebars__cache__simple_8c.html#a8a1c08d8322301b0930a0d6b852a32cd">cache_add</a>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    cache-&gt;<a class="code" href="structhandlebars__cache.html#aaec95f3accb1044fff9ab768995c5df4">find</a> = &amp;<a class="code" href="handlebars__cache__simple_8c.html#ab4b8b72505826d55e810dd64c7cdd465">cache_find</a>;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    cache-&gt;<a class="code" href="structhandlebars__cache.html#a705c63123f96ca05b90f296ce8631569">gc</a> = &amp;<a class="code" href="handlebars__cache__simple_8c.html#aac72962c1d55441aaae23c563433d2c8">cache_gc</a>;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    cache-&gt;<a class="code" href="structhandlebars__cache.html#af21639fb5e6beb8bb6223e1fc5bfd2d8">release</a> = &amp;<a class="code" href="handlebars__cache__simple_8c.html#a62b4d5cb0eae7108d0df7f1af2395f65">cache_release</a>;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    cache-&gt;<a class="code" href="structhandlebars__cache.html#ad7050f50c3b7e3d93bcc35544a287c6c">stat</a> = &amp;<a class="code" href="handlebars__cache__simple_8c.html#af79331ff1183a715cb149247f955d0a7">cache_stat</a>;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    cache-&gt;<a class="code" href="structhandlebars__cache.html#a7bc84fe7c357a726073a3942e46d8d1f">reset</a> = &amp;<a class="code" href="handlebars__cache__simple_8c.html#aac5cf4d9696fde58dbde385f86b9efc8">cache_reset</a>;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keyword">struct </span><a class="code" href="structhandlebars__cache__simple.html">handlebars_cache_simple</a> * intern = <a class="code" href="handlebars__private_8h.html#a82f25723efb47b667ac4b68d8c8bfba9">MC</a>(<a class="code" href="handlebars__memory_8h.html#a4a17829b92cce6ae02bc3174fd6c0e30">handlebars_talloc_zero</a>(cache, <span class="keyword">struct</span> <a class="code" href="structhandlebars__cache__simple.html">handlebars_cache_simple</a>));</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    cache-&gt;<a class="code" href="structhandlebars__cache.html#ae62d0123ba88d34c14e6aa31cff58a6b">internal</a> = intern;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keyword">struct </span><a class="code" href="structhandlebars__map.html">handlebars_map</a> * map = talloc_steal(cache, <a class="code" href="handlebars__map_8c.html#a8d870ec3affcf3205583d954ddc634d5">handlebars_map_ctor</a>(context));</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    intern-&gt;<a class="code" href="structhandlebars__cache__simple.html#a3936b7b70490a135977a1204e7dc6ca8">map</a> = map;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    map-&gt;<a class="code" href="structhandlebars__map.html#ad8e5bc82b13747a6d149dd0d389dbf67">ctx</a> = <a class="code" href="handlebars_8h.html#aeaa554d04fd9ac8b882e4fdf0dc44264">HBSCTX</a>(cache);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">return</span> cache;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;}</div><div class="ttc" id="handlebars__map_8c_html_a8d870ec3affcf3205583d954ddc634d5"><div class="ttname"><a href="handlebars__map_8c.html#a8d870ec3affcf3205583d954ddc634d5">handlebars_map_ctor</a></div><div class="ttdeci">struct handlebars_map * handlebars_map_ctor(struct handlebars_context *ctx)</div><div class="ttdoc">Construct a new map. </div><div class="ttdef"><b>Definition:</b> <a href="handlebars__map_8c_source.html#l00039">handlebars_map.c:39</a></div></div>
<div class="ttc" id="handlebars__cache__simple_8c_html_a8a1c08d8322301b0930a0d6b852a32cd"><div class="ttname"><a href="handlebars__cache__simple_8c.html#a8a1c08d8322301b0930a0d6b852a32cd">cache_add</a></div><div class="ttdeci">static void cache_add(struct handlebars_cache *cache, struct handlebars_string *tmpl, struct handlebars_module *module)</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__simple_8c_source.html#l00138">handlebars_cache_simple.c:138</a></div></div>
<div class="ttc" id="handlebars__private_8h_html_a82f25723efb47b667ac4b68d8c8bfba9"><div class="ttname"><a href="handlebars__private_8h.html#a82f25723efb47b667ac4b68d8c8bfba9">MC</a></div><div class="ttdeci">#define MC(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__private_8h_source.html#l00039">handlebars_private.h:39</a></div></div>
<div class="ttc" id="structhandlebars__cache_html_ae62d0123ba88d34c14e6aa31cff58a6b"><div class="ttname"><a href="structhandlebars__cache.html#ae62d0123ba88d34c14e6aa31cff58a6b">handlebars_cache::internal</a></div><div class="ttdeci">void * internal</div><div class="ttdoc">Opaque pointer for implementation use. </div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache_8h_source.html#l00118">handlebars_cache.h:118</a></div></div>
<div class="ttc" id="handlebars__cache__simple_8c_html_ab4b8b72505826d55e810dd64c7cdd465"><div class="ttname"><a href="handlebars__cache__simple_8c.html#ab4b8b72505826d55e810dd64c7cdd465">cache_find</a></div><div class="ttdeci">static struct handlebars_module * cache_find(struct handlebars_cache *cache, struct handlebars_string *tmpl)</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__simple_8c_source.html#l00120">handlebars_cache_simple.c:120</a></div></div>
<div class="ttc" id="structhandlebars__cache__simple_html"><div class="ttname"><a href="structhandlebars__cache__simple.html">handlebars_cache_simple</a></div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__simple_8c_source.html#l00037">handlebars_cache_simple.c:37</a></div></div>
<div class="ttc" id="handlebars_8c_html_a1f4fa306534133f7349a77eeee628c42"><div class="ttname"><a href="handlebars_8c.html#a1f4fa306534133f7349a77eeee628c42">handlebars_context_bind</a></div><div class="ttdeci">void handlebars_context_bind(struct handlebars_context *parent, struct handlebars_context *child)</div><div class="ttdef"><b>Definition:</b> <a href="handlebars_8c_source.html#l00086">handlebars.c:86</a></div></div>
<div class="ttc" id="structhandlebars__cache_html_af21639fb5e6beb8bb6223e1fc5bfd2d8"><div class="ttname"><a href="structhandlebars__cache.html#af21639fb5e6beb8bb6223e1fc5bfd2d8">handlebars_cache::release</a></div><div class="ttdeci">handlebars_cache_release_func release</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache_8h_source.html#l00126">handlebars_cache.h:126</a></div></div>
<div class="ttc" id="handlebars__cache__simple_8c_html_aac72962c1d55441aaae23c563433d2c8"><div class="ttname"><a href="handlebars__cache__simple_8c.html#aac72962c1d55441aaae23c563433d2c8">cache_gc</a></div><div class="ttdeci">int cache_gc(struct handlebars_cache *cache)</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__simple_8c_source.html#l00078">handlebars_cache_simple.c:78</a></div></div>
<div class="ttc" id="structhandlebars__cache_html_a7bc84fe7c357a726073a3942e46d8d1f"><div class="ttname"><a href="structhandlebars__cache.html#a7bc84fe7c357a726073a3942e46d8d1f">handlebars_cache::reset</a></div><div class="ttdeci">handlebars_cache_reset_func reset</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache_8h_source.html#l00130">handlebars_cache.h:130</a></div></div>
<div class="ttc" id="handlebars_8h_html_aeaa554d04fd9ac8b882e4fdf0dc44264"><div class="ttname"><a href="handlebars_8h.html#aeaa554d04fd9ac8b882e4fdf0dc44264">HBSCTX</a></div><div class="ttdeci">#define HBSCTX(ctx)</div><div class="ttdef"><b>Definition:</b> <a href="handlebars_8h_source.html#l00377">handlebars.h:377</a></div></div>
<div class="ttc" id="handlebars__memory_8h_html_a4a17829b92cce6ae02bc3174fd6c0e30"><div class="ttname"><a href="handlebars__memory_8h.html#a4a17829b92cce6ae02bc3174fd6c0e30">handlebars_talloc_zero</a></div><div class="ttdeci">#define handlebars_talloc_zero</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__memory_8h_source.html#l00053">handlebars_memory.h:53</a></div></div>
<div class="ttc" id="structhandlebars__cache_html_aaec95f3accb1044fff9ab768995c5df4"><div class="ttname"><a href="structhandlebars__cache.html#aaec95f3accb1044fff9ab768995c5df4">handlebars_cache::find</a></div><div class="ttdeci">handlebars_cache_find_func find</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache_8h_source.html#l00122">handlebars_cache.h:122</a></div></div>
<div class="ttc" id="structhandlebars__map_html"><div class="ttname"><a href="structhandlebars__map.html">handlebars_map</a></div><div class="ttdef"><b>Definition:</b> <a href="handlebars__map_8h_source.html#l00041">handlebars_map.h:41</a></div></div>
<div class="ttc" id="structhandlebars__cache_html"><div class="ttname"><a href="structhandlebars__cache.html">handlebars_cache</a></div><div class="ttdoc">In-memory opcode cache. </div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache_8h_source.html#l00113">handlebars_cache.h:113</a></div></div>
<div class="ttc" id="structhandlebars__cache__simple_html_a3936b7b70490a135977a1204e7dc6ca8"><div class="ttname"><a href="structhandlebars__cache__simple.html#a3936b7b70490a135977a1204e7dc6ca8">handlebars_cache_simple::map</a></div><div class="ttdeci">struct handlebars_map * map</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__simple_8c_source.html#l00038">handlebars_cache_simple.c:38</a></div></div>
<div class="ttc" id="handlebars__cache__simple_8c_html_aac5cf4d9696fde58dbde385f86b9efc8"><div class="ttname"><a href="handlebars__cache__simple_8c.html#aac5cf4d9696fde58dbde385f86b9efc8">cache_reset</a></div><div class="ttdeci">static void cache_reset(struct handlebars_cache *cache)</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__simple_8c_source.html#l00177">handlebars_cache_simple.c:177</a></div></div>
<div class="ttc" id="structhandlebars__cache_html_a705c63123f96ca05b90f296ce8631569"><div class="ttname"><a href="structhandlebars__cache.html#a705c63123f96ca05b90f296ce8631569">handlebars_cache::gc</a></div><div class="ttdeci">handlebars_cache_gc_func gc</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache_8h_source.html#l00124">handlebars_cache.h:124</a></div></div>
<div class="ttc" id="handlebars__cache__simple_8c_html_af79331ff1183a715cb149247f955d0a7"><div class="ttname"><a href="handlebars__cache__simple_8c.html#af79331ff1183a715cb149247f955d0a7">cache_stat</a></div><div class="ttdeci">static struct handlebars_cache_stat cache_stat(struct handlebars_cache *cache)</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__simple_8c_source.html#l00168">handlebars_cache_simple.c:168</a></div></div>
<div class="ttc" id="structhandlebars__cache_html_a40efcf612dfc3076f029b6be9a3e3ff5"><div class="ttname"><a href="structhandlebars__cache.html#a40efcf612dfc3076f029b6be9a3e3ff5">handlebars_cache::add</a></div><div class="ttdeci">handlebars_cache_add_func add</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache_8h_source.html#l00120">handlebars_cache.h:120</a></div></div>
<div class="ttc" id="handlebars__cache__simple_8c_html_a62b4d5cb0eae7108d0df7f1af2395f65"><div class="ttname"><a href="handlebars__cache__simple_8c.html#a62b4d5cb0eae7108d0df7f1af2395f65">cache_release</a></div><div class="ttdeci">static void cache_release(struct handlebars_cache *cache, struct handlebars_string *tmpl, struct handlebars_module *module)</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache__simple_8c_source.html#l00163">handlebars_cache_simple.c:163</a></div></div>
<div class="ttc" id="structhandlebars__map_html_ad8e5bc82b13747a6d149dd0d389dbf67"><div class="ttname"><a href="structhandlebars__map.html#ad8e5bc82b13747a6d149dd0d389dbf67">handlebars_map::ctx</a></div><div class="ttdeci">struct handlebars_context * ctx</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__map_8h_source.html#l00042">handlebars_map.h:42</a></div></div>
<div class="ttc" id="structhandlebars__cache_html_ad7050f50c3b7e3d93bcc35544a287c6c"><div class="ttname"><a href="structhandlebars__cache.html#ad7050f50c3b7e3d93bcc35544a287c6c">handlebars_cache::stat</a></div><div class="ttdeci">handlebars_cache_stat_func stat</div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache_8h_source.html#l00128">handlebars_cache.h:128</a></div></div>
<div class="ttc" id="structhandlebars__cache_html_a5e03e6bcdb242893423b04205d430121"><div class="ttname"><a href="structhandlebars__cache.html#a5e03e6bcdb242893423b04205d430121">handlebars_cache::max_age</a></div><div class="ttdeci">double max_age</div><div class="ttdoc">The max amount of time to keep an entry, in seconds, or zero to disable. </div><div class="ttdef"><b>Definition:</b> <a href="handlebars__cache_8h_source.html#l00133">handlebars_cache.h:133</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="handlebars__cache_8h.html">handlebars_cache.h</a></li>
    <li class="footer">Generated on Thu Mar 9 2017 12:59:45 for handlebars.c by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
